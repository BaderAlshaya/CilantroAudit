#:import GREY_LIGHT cilantro_audit.constants.RGB_GREY_LIGHT
#:import COMMENT_MAX_LENGTH cilantro_audit.constants.COMMENT_MAX_LENGTH
#:import COMMENT_MIN_LENGTH cilantro_audit.constants.COMMENT_MIN_LENGTH

<AnswerModule>:

    question_label: question_label
    yes_box: yes_box
    no_box: no_box
    other_box: other_box
    other_comments: other_comments

    size_hint: 1, None
    height: 200

    # Question text
    Label:
        id: question_label
        text: root.question_text
        color: 1, 1, 1, 1
        size_hint: None, None
        pos_hint: {"top": 1.5, "center_x": 0.5}
        text_size: root.width-100, None

    # Yes button
    Button:
        id: yes_box
        text: "Yes"
        background_color: GREY_LIGHT
        size: 60, 60
        size_hint: None, None
        pos_hint: {"top": 1.0, "center_x": 0.05}
        on_press: root.yes_box_press()

    # No button
    Button:
        id: no_box
        text: "No"
        background_color: GREY_LIGHT
        size: 60, 60
        size_hint: None, None
        pos_hint: {"top": 1.0, "center_x": 0.15}
        on_press: root.no_box_press()

    # Other button
    Button:
        id: other_box
        text: "Other"
        background_color: GREY_LIGHT
        size: 60, 60
        size_hint: None, None
        pos_hint: {"top": 1.0, "center_x": 0.25}
        on_press: root.other_box_press()

    # Comments label
    Label:
        text: "Comments"
        size_hint: None, None
        pos_hint: {"top": 1.4, "center_x": 0.70}

    # Comments input
    TextInput:
        id: other_comments
        size_hint: None, None
        pos_hint: {"top": 0.98, "center_x":0.7}
        size: 400, 50
        # Limits comment length to database defined max length. From
        # https://stackoverflow.com/questions/25296508/set-the-width-property-for-textinput
        # On every input we check filter the text to a substring that is at most
        # COMMENT_MAX_LENGTH long.
        input_filter: lambda text, from_undo: text[:COMMENT_MAX_LENGTH - len(self.text)]
        hint_text: "Comment is required if 'Other' is checked"

