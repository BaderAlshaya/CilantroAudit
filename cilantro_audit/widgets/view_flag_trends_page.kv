#:import ADMIN_SCREEN cilantro_audit.constants.ADMIN_SCREEN
#:import VIEW_FLAG_TRENDS_PAGE cilantro_audit.constants.VIEW_FLAG_TRENDS_PAGE

<ViewFlagTrendsPage>:
    question_text_col: question_text_col
    audit_col: audit_col
    times_flagged_col: times_flagged_col
    refresh_button: refresh_button

    GridLayout:
        id: page_layout
        rows: 2
        spacing: 10

        GridLayout:
            id: list_layout
            rows: 2
            size_hint_x: 1.8
            spacing: 10

            GridLayout:
                id: headers
                cols: 3
                spacing: 10
                size_hint_y: 0.1

                Button:
                    id: question_header
                    text: 'Question'
                    spacing: 10
                    on_press: root.manager.get_screen(VIEW_FLAG_TRENDS_PAGE).sort_by_question()

                Button:
                    id: audit_template_header
                    text: 'Audit Template'
                    spacing: 10
                    on_press: root.manager.get_screen(VIEW_FLAG_TRENDS_PAGE).sort_by_audit_template()

                Button:
                    id: times_flagged_header
                    text: 'Times Flagged'
                    spacing: 10
                    on_press: root.manager.get_screen(VIEW_FLAG_TRENDS_PAGE).sort_by_times_flagged()

            ScrollView:
                GridLayout:
                    cols: 3
                    spacing: 10
                    size_hint_y: None

                    GridLayout:
                        id: question_text_col
                        cols: 1

                    GridLayout:
                        id: audit_col
                        cols: 1

                    GridLayout:
                        id: times_flagged_col
                        cols: 1

        GridLayout:
            id: navigation_options
            cols: 2
            size_hint_y: 0.1

            Button:
                text: 'Return to Admin Page'
                size_hint_y: None
                size: 400, 50
                on_press: root.manager.current = ADMIN_SCREEN

            Button:
                id: refresh_button
                text: 'Refresh List'
                size_hint_y: None
                size: 400, 50
                on_press: root.manager.get_screen(VIEW_FLAG_TRENDS_PAGE).get_flagged_questions()


<QuestionButton@Button>:
    size_hint_y: None
    on_release:
        #app.root.current = ''
        app.root.transition.duration = 0.3
        app.root.transition.direction = 'right'
